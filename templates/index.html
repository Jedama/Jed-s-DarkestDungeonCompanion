<!DOCTYPE html>
<link rel="shortcut icon" href="#">
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jed's Darkest Dungeon Companion</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <div id="savefile-modal" class="modal">
        <div class="modal-content">
            <h2>Enter Estate Name</h2>
            <input type="text" id="savefile-name" placeholder="Estate Name">
            <button id="savefile-submit">Submit</button>
        </div>
    </div>

    <div id="recruit-modal" class="modal">
        <div class="modal-content">
            <h2>New Recruit</h2>
            <select id="recruit-dropdown"></select>
            <input type="text" id="recruit-name" placeholder="Character Name">
            <div id="recruit-icon"></div>
            <div id="recruit-modifier-container">
                <input type="text" id="recruit-modifier" placeholder="Enter modifier">
            </div>
            <img id="recruit-hire" src="/graphics/default/assets/button/seal.png">
        </div>
    </div>

    <div id="story-modal" class="modal">
        <div class="modal-content">
          <div class="story-panel">
            <!-- Content will be dynamically inserted here -->
          </div>
          <div class="story-cards">
            <!-- Cards will be dynamically inserted here -->
          </div>
          <div class="story-buttons">
            <button id="continue-btn" class="story-btn">
                <img src="/graphics/default/assets/button/continue.png" alt="Continue">
            </button>
            <button id="return-btn" class="story-btn">
                <img src="/graphics/default/assets/button/return.png" alt="Return">
            </button>
          </div>
        </div>
    </div>

    <div class="loading-overlay">
        <div class="loading-card">
            <!-- Face elements will be created dynamically -->
        </div>
    </div>

    <div class="main-container">
        <div class="left-panel">
            <div class="character-info">
                <img id="character-portrait" class="character-portrait" src="" alt="Character Portrait">
                <h2 id="character-name"></h2>
                <h3 id="character-title"></h3>
                <div class="trait-list">
                    <ul id="character-traits"></ul>
                </div>
                <div class="health-bookmark"></div>
                <div class="mental-bookmark"></div>
                <div class="stats-container">
                    <div class="stat-item" data-stat="strength">
                        <div class="gem-wrapper">
                            <img src="/graphics/default/assets/stat/strength.png" alt="Strength" class="gem">
                        </div>
                        <span class="stat-number"></span>
                    </div>
                    <div class="stat-item" data-stat="agility">
                        <div class="gem-wrapper">
                            <img src="/graphics/default/assets/stat/agility.png" alt="Agility" class="gem">
                        </div>
                        <span class="stat-number"></span>
                    </div>
                    <div class="stat-item" data-stat="intelligence">
                        <div class="gem-wrapper">
                            <img src="/graphics/default/assets/stat/intelligence.png" alt="Intelligence" class="gem">
                        </div>
                        <span class="stat-number"></span>
                    </div>
                    <div class="stat-item" data-stat="authority">
                        <div class="gem-wrapper">
                            <img src="/graphics/default/assets/stat/authority.png" alt="Authority" class="gem">
                        </div>
                        <span class="stat-number"></span>
                    </div>
                    <div class="stat-item" data-stat="sociability">
                        <div class="gem-wrapper">
                            <img src="/graphics/default/assets/stat/sociability.png" alt="Sociability" class="gem">
                        </div>
                        <span class="stat-number"></span>
                    </div>
                </div>
            </div>
        </div>
        <div class="middle-panel">
            <div id="gallery-view" class="gallery" >
                <div id="character-grid" class="character-grid"></div>
            </div>
            <div id="dungeon-view" class="dungeon-view" style="display: none;">
                <div id="dungeon-characters-container" class="dungeon-characters-container">
                    <div class="character-wrapper" data-position="0">
                        <img class="stress-meter" src="" alt="Stress Meter">
                        <img class="character dungeon-character" id="char0" src="" alt="Character 0">
                    </div>
                    <div class="character-wrapper" data-position="1">
                        <img class="stress-meter" src="" alt="Stress Meter">
                        <img class="character dungeon-character" id="char1" src="" alt="Character 1">
                    </div>
                    <div class="character-wrapper" data-position="2">
                        <img class="stress-meter" src="" alt="Stress Meter">
                        <img class="character dungeon-character" id="char2" src="" alt="Character 2">
                    </div>
                    <div class="character-wrapper" data-position="3">
                        <img class="stress-meter" src="" alt="Stress Meter">
                        <img class="character dungeon-character" id="char3" src="" alt="Character 3">
                    </div>
                </div>
                <canvas id="dungeon-canvas" style="display:none;"></canvas>
            </div>
        </div>
        <div class="right-panel">
            <button id="save-button" class="panel-button">Save</button>
            <button id="recruit-button" class="panel-button">Recruit</button>
            <button id="event-button" class="panel-button">Event</button>
        </div>
    </div>

    <script type="module" src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>